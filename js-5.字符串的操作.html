<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>无标题文档</title>
</head>

<body>
</body>

</html>
<script type="text/ecmascript">
	var str = 'conndatabase red blue yellow';
	console.log('直接赋值' + typeof str);//类型是string类型的
	var lastPos = str.lastIndexOf('o');
	var pos = str.indexOf('d');
	//console.log(lastPos);
	//  console.log(pos);
	var newStr = str.substr(pos, 5);
	console.log(newStr);
	var newStr1 = str.substring(pos, -3);
	console.log(newStr1);
	//字符串定义
	//创建字符串对象
	var str = new String("<img src='/img/logo.jpg' height='30' width='100'    alt='Logo'>");
	console.log('new创建对象:' + typeof str);//类型是object的
	console.log(str);
	//创建字符串变量
	str = "<img src='/img/logo.jpg' height='30' width='100' alt='Logo'>";
	console.log(str);
	//求字符串的长度 :string.length
	//得到字符串的指定位置的字符串使用方法:string.charAt(index);

	//字符串拼接
	str = "my name is" + "张秋红";
	console.log(str);
	//将多个字符串累加为一个字符串，不会覆盖前者的字符串，用'+='来拼接
	str += ",and age is 22";
	console.log(str);
	//在字符串中添加换行	   
	var confirmString = "You did not enter a response to the last " +
		"question.\nSubmit form anyway?";
	console.log(confirmString);

	var htmlString = "First line of string.<br>Second line of string.";
	document.write(htmlString);//向dom文档模型中输出一句话
	//String对象提供了concat方法,此方法不会改变原来的字符串，字符串拼接的方法+修改了原来的字符串
	var str1 = 'aa';
	var str2 = 'bb';
	var str3 = 'cc';
	console.log(str1.concat(str2, str3));
	console.log(str1);

	//字符串操作方法
	//字符串的截取substring,此方法不会修改原字符串本身，返回为一个新的字符串
	var fullstring = "Every dog has his day";
	var section = fullstring.substring(0, 4);//从0到4，不包括结束位置4,Ever,	  console.log(section);//Ever
	console.log(fullstring);//Every dog has his day
	section = fullstring.substring(4, 0);//如果第二个参数比第一个参数小，则会默认从小的开始截取，到大的结束
	console.log(section);//Ever
	section = fullstring.substring(4, 0);
	console.log(section);//Ever
	section = fullstring.substring(1, 1);//如果起始位置和结束位置一样，则结果为空字符串
	console.log(section);
	section = fullstring.substring(1, 2);//v
	console.log(section);//Ever
	section = fullstring.substring(-2, 4);//如果其实位置为负数，则默认从0开始
	section = fullstring.substring(3); //ry dog has his day,从第0个位置开始一直截取到最后一位
	console.log('aa:' + section);
	console.log(fullstring);//原字符串的值没有变。为：Every dog has his day


	//字符串slice方法,此方法不会修改原字符串本身，返回为一个新的字符串，从起始位置到结束位置，不包括结束位置.起始位置和终止位置可以为负数，但是起始位置不能比终止位置大，如果比他大将会返回空.
	var str = "I love you very much";
	var result = str.slice(0, 4);//I lo
	result = str.slice(1, 1);//空,起始位置和终止位置相等返回空
	result = str.slice(-2, 4);//空。起始位置为负数的话，终止位置必须为负数且终止位置大于起始位置
	result = str.slice(-4, -2);//mu
	result = str.slice(4, -2);//起始位置为正数，终止位置可以为负数，ve you very mu 
	result = str.slice(4, 2);//null
	result = str.slice(1);//love you very much;如果没有第二个参数，则表示，从起始位置一直截取到字符串末尾
	console.log(str);//I love you very much,原字符串的值没有变化
	console.log(result);

	//str.substr(start,length),start表示起始位置,length表示子字符串长度
	result = str.substr(0, 3);//I l
	result = str.substr(-1, 3);//从最后一个位置开始截取三个长度的字符串，相当于截取最后一位
	result = str.substr(3, -1);//空
	result = str.substring(2);//从第一位开始截取，截取到字符串末尾，love you very much 
	console.log('here' + result);

	//字符串大小写转换问题
	var str = 'AbCD';
	var aa = str.toLowerCase();
	console.log(aa);//abcd

	var aO = ['11px', '33px', '4px', '2px'];
	var a2 = aO.sort(function (a, b) {
		var a = parseInt(a);
		var b = parseInt(b);
		if (a - b > 0) return 1;
		else if (a - b < 0) return -1;
		else return 0;
	});

	console.log(aO);
	console.log(a2);

	//字符串查找,返回字符串中一个子串第一处出现的索引。strObj.indexOf(subString,startIndex),如果没有匹配项，返回 -1 ,索引从startIndex开始
	var str = 'abcd efd';
	var a1 = str.indexOf('d', 4);
	console.log(a1);//7
	//strObj.lastIndexOf(substring, startindex)  :strObj为要进行判断的字符串，subString为要在strObj查找的子字符串，startIndex是可选的，表示查找的开始位置(基于0的索引)，如果startIndex省略，则从strObj末尾处查找，如果startIndex小于0，则从0开始，如果startIndex大于最大索引，则从最大索引处开始。该方法自右向左查找，返回subString在strObj中最后出现的位置，如果没有找到，返回-1。

	var b = str.lastIndexOf('d', 4);
	console.log(b);//7

	//如何求得一个字符串包含另外一个字符串的次数
	function countInstances(mainStr, subStr) {
		var count = 0;//查找到的次数
		var offset = 0;//表示索引的位置，如果没有查找到，则返回为-1。否则都是从索引0开始
		do {
			offset = mainStr.indexOf(subStr, offset);
			if (offset != -1) {//如果索引位置不等于-1，则表示查找到了
				count++;
				offset += subStr.length;//找到一次，索引位置就加上自身的宽度一次，下次匹配时就从这个记录的位置开始
			}
		} while (offset != -1)//如果没有查找到就结束循环
		return count;
	}

	var c = countInstances('fallredfallredfallredlovel', 'fallred');
	//console.log('累计次数'+c);
	/*
	subStr:fallred  offset:0
	第一次:offset=0(fallred第一次出现的位置为0)
		  offset！=-1   count++   count=1  offset=offset+fallred.length=0+7=7
	第二次:offset!=-1 进入dowhile 循环
		  offset=fallredfallredfallredlovel.indexOf(fallred,7)=7 第二次出现的位置为7(不存在就返回-1)
		  offset!=-1 count++  count=2 offset=offset+7=14;
	第三次:offset!=-1  进入dowhile循环 
		  offset=fallredfallredfallredlovel.indexOf(fallred,14)=14 第三次出现的位置为14
		  offset!=-1 count++  count=3  offset=offset+7=28;
	第四次：offset!=-1 进入while循环
		  offset=fallredfallredfallredlovel.indexOf(fallred,28)=-1  没有查找到
		  不能进入if语句
	第五次：offset为-1 退出do-while循环	  
	*/

	var strObj = "ABCDEFG";//A:65 B:66 C:67 D:68
	var code = strObj.charCodeAt(2);
	//console.log(code);//67

	//判断两个字符串是否相等，JavaScript有两种相等运算符。一种是完全向后兼容的，标准的"=="，如果两个操作数类型不一致，它会在某些时候自动对操作数进行类型转换。‘===’类型转换
	var str1 = 'abc';
	var str2 = new String('abc');
	if (str1 == str2) {
		console.log('true,两个字符串值相等');
	} else {
		console.log('false');
	}
	console.log('-------------------');
	//charAt() – 返回指定位置的字符
	var str = 'abcdefg';
	var str1 = str.charAt(3);
	console.log(str1);

	//返回一个字符串是否匹配一个正则表达式,形式：str.match(reg);
	//与正则表达式的exec方法类似，该方法同样返回一个类似数组的对象，也
	// 有input和index属性。返回值数组的第一项是匹配到的所有字符，第一项是匹配到的第一个分组，第二项就是匹配到的第二项、、

	var str = 'bbs.zhufengpeixun.cn';
	var reg = /(\w+).(\w+).(\w+)/;
	var result = str.match(reg);
	console.log('match匹配后返回的值为' + result + '\n' + "result类型为：" + typeof result);
	if (result) {
		console.log('index:' + result.index + '\n' + 'input:' + result.input);
		console.log('第0项' + result[0] + '第1项' + result[1] + '第2项' + result[2] + '第3项' + result[3]);
		for (var i = 0; i < result.length; i++) {
			console.log('数组：result[' + i + ']--->' + result[i]);
		}
	}
	/*replace() – 用来查找匹配一个正则表达式的字符串，然后使用新字符串代替匹配的字符串。
	replace() 方法用于在字符串中用一些字符替换另一些字符，或替换一个与正则表达式匹配的子串。
	str.replace(regexp/substr,replacement)
   一个新的字符串，是用 replacement 替换了 regexp 的第一次匹配或所有匹配之后得到的。
	
   字符串 str 的 replace() 方法执行的是查找并替换的操作。它将在 str 中查找与         regexp 相匹配的子字符串，然后用 replacement 来替换这些子串。如果 regexp 具          有全局标志 g，那么 replace() 方法将替换所有匹配的子串。否则，它只替换第一个匹配子串。
	 replacement 可以是字符串，也可以是函数。如果它是字符串，那么每个匹配都将         由字符串替换.当replace() 方法的第二个参数 replacement是函数而不是字符串时 ，每次匹配都调用该函数，将这个函数的返回的字符串将作为替换文本使用。
	 该函数的第一个参数是匹配到的字符串。第二个参数是一个整数，是正则匹配到的                 内容在原字符串中的位置。第三个参数是原字符串本身。		 */

	//用字符串替换
	var str = 'bbs.zhufengpeixun.cn';
	var str2 = str.replace('b', 'c');
	console.log('原字符串为:' + str);//不会改变原来的字符串
	console.log('返回的新字符串：' + str2);
	//用正则表达式替换
	var reg = /b/;
	var str3 = str.replace(reg, 'c');
	console.log('用正则表达式替换后的结果字符串为：' + str3);
	//还有一种保存正则里分组的方式，就是RegExp.$1,RegExp.$2…….RegExp.$9
	var reg = /(\w+).(\w+).(\w+)/;
	var str = 'online.zhufengpeixun.cn';
	var newStr = str.replace(reg, '$2.$2.$2');
	console.log('第一个分组为' + RegExp.$1);//获取分组
	console.log('第二个分组为' + RegExp.$2);
	console.log('第三个分组为' + RegExp.$3);
	console.log('用第二个分组替换匹配的字符串后：' + newStr + ',原字符串为:' + str);

	//用分组$替换
	var reg = /(\w+)\s(\w+)/;
	var str = 'cainiao gaoshou';
	var newStr = str.replace(reg, '$2 $1');
	console.log('替换之后的字符串为:' + newStr);
	//用函数作为replace的第二个参数
	var reg = /[a-z]/g;//定义一个只匹配小写字母的正则
	var str = 'a1b2c3d4';
	var str = str.replace(reg, function (result, position, string) {
		var str = '在' + position + '的位置匹配到了' + result + ',原字符串是:' + string; console.log(str + '\n');
		return position;
	});
	console.log(str);

	//search方法,str.search(reg);search返回正则表达式第一次匹配的位置
	var reg = /\W/;
	var str = 'online.zhufengpeixun.cn';
	var pos = str.search(reg);
	console.log(pos);

	//split:将字符串转换为数组  str.split(reg,'seprator');split返回分割后的数组
	var reg = /\W/;
	var str = 'online.zhufengpeixun.cn';
	var arr = str.split(reg);
	console.log(arr);
	console.log('arr的类型为:' + typeof arr + ',数组为' + arr);



	//字符串函数扩充
	//去除左边的空格
	String.prototype.Trim = function () {
		return this.replace(/(^\s*)/g, '');
	}
</script>